<html>
<head>
<style>
  * { 
      box-sizing: border-box; 
  }
  body {
    width: 100%;
    background: black;
    color: white;
  }
  #gated {
    display: none;
  }
  details > div {
    width: 100%;
    margin: 4px 0px 4px 32px;
  }
  summary {
    padding: 8px;
    cursor: pointer;
  }
  .videoLink {
    margin: 8px;
    padding: 8px;
    cursor: pointer;
    border-radius: 16px;
    background: orange;
  }
</style>
</head>
<body>
<main>
  <input id="code" />
  <div id=gated>
  </div>
</main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
  const listEl = document.getElementById('gated');
  
  function newEl(tag, className, text) {
    const el = document.createElement(tag);
    if (className) {
      el.className = className;
    }
    if (text) {
      el.textContent = text;
    }
    return el;
  }
  
  function showList(movies) {
    while (listEl.lastChild) {
      listEl.lastChild.remove();
    }
    
    movies.forEach(m => listEl.appendChild(makeMovie(m)));
  }
  
  function makeMovie(data) {
    const details = newEl('details');
    details.setAttribute('open', 'open');
    const summary = newEl('summary', '', data.movie);
    details.appendChild(summary);
    
    const content = newEl('div', 'seasons');
    details.appendChild(content);
    data.seasons.forEach((s, i) => content.appendChild(makeSeason(s, i, data.movie)));
    
    return details;
  }
  
  function makeSeason(data, index, movieName) {
    const details = newEl('details');
    details.setAttribute('open', 'open');
    const seasonName = data.season || `Season ${index + 1}`;
    const summary = newEl('summary', '', `${movieName} - ${seasonName}`);
    details.appendChild(summary);
    
    const content = newEl('div', 'episodes');
    details.appendChild(content);
    data.episodes.forEach(e => content.appendChild(makeEpisode(e)));
    
    return details;
  }
  
  function makeEpisode(data) {
    const item = newEl('a', 'videoLink', data.name);
    item.setAttribute('href', data.embed);
    return item;
  }
  
  function setCookie(name,value,days) {
      var expires = "";
      if (days) {
          var date = new Date();
          date.setTime(date.getTime() + (days*24*60*60*1000));
          expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "")  + expires + ";";
  }
  
  function getCookie(name) {
      var nameEQ = name + "=";
      var ca = document.cookie.split(';');
      for(var i=0;i < ca.length;i++) {
          var c = ca[i];
          while (c.charAt(0)==' ') c = c.substring(1,c.length);
          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
      }
      return null;
  }
  
  function resolve({ target }) {
    const code = target.value;
    if (!code) {
      return;
    }
    openGate(code);
    setCookie('encryptedCode', code, 1000);
  }
  
  function openGate(key) {
    const data = JSON.parse(CryptoJS.AES.decrypt(encrypted, key).toString(CryptoJS.enc.Utf8));
    if (Array.isArray(data) && data[0].movie) {
      showList(data);
      document.getElementById('code').style.display = 'none';
      document.getElementById('gated').style.display = 'block';
    }
  }
  
  function init() {
    try {
      const code = getCookie('encryptedCode');
      if (code) {
        openGate(code);
        return;
      }
    } catch (e) {}
    document.getElementById('code').addEventListener('keypress', event => event.keyCode === 13 && resolve(event));
  }

  const encrypted = "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";
 
  init();
</script>
</body>
</html>
