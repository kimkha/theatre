<html>
<head>
<style>
  * { 
      box-sizing: border-box; 
  }
  body {
    width: 100%;
    background: black;
    color: white;
  }
  #gated {
    display: none;
  }
  details > div {
    width: 100%;
    margin: 4px 0px 4px 32px;
  }
  summary {
    padding: 8px;
    cursor: pointer;
  }
  .videoLink {
    margin: 8px;
    padding: 8px;
    cursor: pointer;
    border-radius: 16px;
    background: orange;
  }
</style>
</head>
<body>
<main>
  <input id="code" />
  <div id=gated>
    <iframe id=player width="640" height="360" frameborder="0" src="" allowfullscreen allow="autoplay;"></iframe>
    <details open>
      <summary>More movies</summary>
      <div id=list></div>
    </details>
  </div>
</main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
  const listEl = document.getElementById('list');
  const playerEl = document.getElementById('player');
  
  function newEl(tag, className, text) {
    const el = document.createElement(tag);
    if (className) {
      el.className = className;
    }
    if (text) {
      el.textContent = text;
    }
    return el;
  }
  
  function showList(movies) {
    while (listEl.lastChild) {
      listEl.lastChild.remove();
    }
    
    movies.forEach(m => listEl.appendChild(makeMovie(m)));
  }
  
  function makeMovie(data) {
    const details = newEl('details');
    const summary = newEl('summary', '', data.movie);
    details.appendChild(summary);
    
    const content = newEl('div', 'seasons');
    details.appendChild(content);
    data.seasons.forEach((s, i) => content.appendChild(makeSeason(s, i, data.movie)));
    
    return details;
  }
  
  function makeSeason(data, index, movieName) {
    const details = newEl('details');
    details.setAttribute('open', 'open');
    const seasonName = data.season || `Season ${index + 1}`;
    const summary = newEl('summary', '', `${movieName} - ${seasonName}`);
    details.appendChild(summary);
    
    const content = newEl('div', 'episodes');
    details.appendChild(content);
    data.episodes.forEach(e => content.appendChild(makeEpisode(e)));
    
    return details;
  }
  
  function makeEpisode(data) {
    const item = newEl('span', 'videoLink', data.name);
    item.setAttribute('data-href', data.embed);
    item.addEventListener('click', ({ target }) => {
      const href = target.getAttribute('data-href');
      if (href) {
        playMovie(href);
      } else {
        alert(`not found ${href}`);
      }
    });
    return item;
  }
  
  function playMovie(href) {
    playerEl.setAttribute('src', href);
  }
  
  function setCookie(name,value,days) {
      var expires = "";
      if (days) {
          var date = new Date();
          date.setTime(date.getTime() + (days*24*60*60*1000));
          expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "")  + expires + ";";
  }
  
  function getCookie(name) {
      var nameEQ = name + "=";
      var ca = document.cookie.split(';');
      for(var i=0;i < ca.length;i++) {
          var c = ca[i];
          while (c.charAt(0)==' ') c = c.substring(1,c.length);
          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
      }
      return null;
  }
  
  function resolve({ target }) {
    const code = target.value;
    if (!code) {
      return;
    }
    openGate(code);
    setCookie('encryptedCode', code, 1000);
  }
  
  function openGate(key) {
    const data = JSON.parse(CryptoJS.AES.decrypt(encrypted, key).toString(CryptoJS.enc.Utf8));
    if (Array.isArray(data) && data[0].movie) {
      showList(data);
      document.getElementById('code').style.display = 'none';
      document.getElementById('gated').style.display = 'block';
    }
  }
  
  function init() {
    playerEl.width =
        (window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth)
        - 16;
    playerEl.height =
        (window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight)
        - 16;
    try {
      const code = getCookie('encryptedCode');
      if (code) {
        openGate(code);
        return;
      }
    } catch (e) {}
    document.getElementById('code').addEventListener('keypress', event => event.keyCode === 13 && resolve(event));
  }

  const encrypted = "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";
 
  init();
</script>
</body>
</html>
